var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function o(t){t.forEach(n)}function l(t){return"function"==typeof t}function r(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t){return null==t?"":t}function u(t,n){t.appendChild(n)}function s(t,n,e){t.insertBefore(n,e||null)}function a(t){t.parentNode.removeChild(t)}function i(t){return document.createElement(t)}function f(t){return document.createTextNode(t)}function d(){return f(" ")}function p(t,n,e,o){return t.addEventListener(n,e,o),()=>t.removeEventListener(n,e,o)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function h(t){return""===t?null:+t}function g(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}function $(t,n){t.value=null==n?"":n}let y;function v(t){y=t}function b(){if(!y)throw new Error("Function called outside component initialization");return y}function x(){const t=b();return(n,e)=>{const o=t.$$.callbacks[n];if(o){const l=function(t,n,e=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,e,!1,n),o}(n,e);o.slice().forEach((n=>{n.call(t,l)}))}}}const _=[],k=[],w=[],z=[],E=Promise.resolve();let N=!1;function C(t){w.push(t)}let S=!1;const A=new Set;function T(){if(!S){S=!0;do{for(let t=0;t<_.length;t+=1){const n=_[t];v(n),j(n.$$)}for(v(null),_.length=0;k.length;)k.pop()();for(let t=0;t<w.length;t+=1){const n=w[t];A.has(n)||(A.add(n),n())}w.length=0}while(_.length);for(;z.length;)z.pop()();N=!1,S=!1,A.clear()}}function j(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(C)}}const M=new Set;let L;function O(){L={r:0,c:[],p:L}}function P(){L.r||o(L.c),L=L.p}function q(t,n){t&&t.i&&(M.delete(t),t.i(n))}function B(t,n,e,o){if(t&&t.o){if(M.has(t))return;M.add(t),L.c.push((()=>{M.delete(t),o&&(e&&t.d(1),o())})),t.o(n)}}function I(t,n){t.d(1),n.delete(t.key)}function R(t,e,r,c){const{fragment:u,on_mount:s,on_destroy:a,after_update:i}=t.$$;u&&u.m(e,r),c||C((()=>{const e=s.map(n).filter(l);a?a.push(...e):o(e),t.$$.on_mount=[]})),i.forEach(C)}function F(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function U(t,n){-1===t.$$.dirty[0]&&(_.push(t),N||(N=!0,E.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function D(n,l,r,c,u,s,i,f=[-1]){const d=y;v(n);const p=n.$$={fragment:null,ctx:null,props:s,update:t,not_equal:u,bound:e(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:l.context||[]),callbacks:e(),dirty:f,skip_bound:!1,root:l.target||d.$$.root};i&&i(p.root);let m=!1;if(p.ctx=r?r(n,l.props||{},((t,e,...o)=>{const l=o.length?o[0]:e;return p.ctx&&u(p.ctx[t],p.ctx[t]=l)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](l),m&&U(n,t)),e})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),l.target){if(l.hydrate){const t=function(t){return Array.from(t.childNodes)}(l.target);p.fragment&&p.fragment.l(t),t.forEach(a)}else p.fragment&&p.fragment.c();l.intro&&q(n.$$.fragment),R(n,l.target,l.anchor,l.customElement),T()}v(d)}class G{$destroy(){F(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function H(n){let e,l,r,c,y,v,b,x,_,k,w=n[1]+1+"";return{c(){e=i("main"),l=i("div"),r=i("h3"),c=f("Parameter "),y=f(w),v=d(),b=i("input"),m(b,"type","number"),m(b,"name",x=`param${n[1]}`),m(l,"class","card svelte-16e0qnc")},m(t,o){s(t,e,o),u(e,l),u(l,r),u(r,c),u(r,y),u(l,v),u(l,b),$(b,n[0]),_||(k=[p(b,"input",n[4]),p(b,"keyup",n[2]),p(b,"change",n[3])],_=!0)},p(t,[n]){2&n&&w!==(w=t[1]+1+"")&&g(y,w),2&n&&x!==(x=`param${t[1]}`)&&m(b,"name",x),1&n&&h(b.value)!==t[0]&&$(b,t[0])},i:t,o:t,d(t){t&&a(e),_=!1,o(k)}}}function J(t,n,e){const o=x();let{paramNo:l}=n,{value:r}=n;function c(){o("change",{paramNo:l,value:r})}return t.$$set=t=>{"paramNo"in t&&e(1,l=t.paramNo),"value"in t&&e(0,r=t.value)},[r,l,function(){c()},c,function(){r=h(this.value),e(0,r)}]}class K extends G{constructor(t){super(),D(this,t,J,H,r,{paramNo:1,value:0})}}function Q(t,n,e){const o=t.slice();return o[8]=n[e],o}function V(t,n,e){const o=t.slice();return o[11]=n[e],o}function W(n){let e;return{c(){e=i("p"),e.textContent="Loading..."},m(t,n){s(t,e,n)},p:t,d(t){t&&a(e)}}}function X(t){let n,e=[],o=new Map,l=t[1];const r=t=>t[11].name;for(let n=0;n<l.length;n+=1){let c=V(t,l,n),u=r(c);o.set(u,e[n]=Y(u,c))}return{c(){n=i("ul");for(let t=0;t<e.length;t+=1)e[t].c();m(n,"id","operations-list"),m(n,"class","svelte-107y00z")},m(t,o){s(t,n,o);for(let t=0;t<e.length;t+=1)e[t].m(n,null)},p(t,c){19&c&&(l=t[1],e=function(t,n,e,o,l,r,c,u,s,a,i,f){let d=t.length,p=r.length,m=d;const h={};for(;m--;)h[t[m].key]=m;const g=[],$=new Map,y=new Map;for(m=p;m--;){const t=f(l,r,m),u=e(t);let s=c.get(u);s?o&&s.p(t,n):(s=a(u,t),s.c()),$.set(u,g[m]=s),u in h&&y.set(u,Math.abs(m-h[u]))}const v=new Set,b=new Set;function x(t){q(t,1),t.m(u,i),c.set(t.key,t),i=t.first,p--}for(;d&&p;){const n=g[p-1],e=t[d-1],o=n.key,l=e.key;n===e?(i=n.first,d--,p--):$.has(l)?!c.has(o)||v.has(o)?x(n):b.has(l)?d--:y.get(o)>y.get(l)?(b.add(o),x(n)):(v.add(l),d--):(s(e,c),d--)}for(;d--;){const n=t[d];$.has(n.key)||s(n,c)}for(;p;)x(g[p-1]);return g}(e,c,r,1,t,l,o,n,I,Y,null,V))},d(t){t&&a(n);for(let t=0;t<e.length;t+=1)e[t].d()}}}function Y(t,n){let e,o,r,d,h,$,y=n[11].name+"";return{key:t,first:null,c(){e=i("li"),o=f(y),m(e,"id",r=`op-${n[11].name}`),m(e,"class",d=c(n[0]===n[11]?"selected":"")+" svelte-107y00z"),this.first=e},m(t,r){s(t,e,r),u(e,o),h||($=p(e,"click",(function(){l(n[4](n[11]))&&n[4](n[11]).apply(this,arguments)})),h=!0)},p(t,l){n=t,2&l&&y!==(y=n[11].name+"")&&g(o,y),2&l&&r!==(r=`op-${n[11].name}`)&&m(e,"id",r),3&l&&d!==(d=c(n[0]===n[11]?"selected":"")+" svelte-107y00z")&&m(e,"class",d)},d(t){t&&a(e),h=!1,$()}}}function Z(t){let n,e,o,l,r,c,f=t[3],p=[];for(let n=0;n<f.length;n+=1)p[n]=nt(Q(t,f,n));const h=t=>B(p[t],1,1,(()=>{p[t]=null}));let g=t[2]&&et(t);return{c(){n=i("div"),e=i("div"),o=i("h2"),o.textContent="Input Parameters",l=d();for(let t=0;t<p.length;t+=1)p[t].c();r=d(),g&&g.c(),m(o,"class","svelte-107y00z"),m(e,"id","params-pane"),m(e,"class","svelte-107y00z"),m(n,"id","right-side"),m(n,"class","svelte-107y00z")},m(t,a){s(t,n,a),u(n,e),u(e,o),u(e,l);for(let t=0;t<p.length;t+=1)p[t].m(e,null);u(n,r),g&&g.m(n,null),c=!0},p(t,o){if(40&o){let n;for(f=t[3],n=0;n<f.length;n+=1){const l=Q(t,f,n);p[n]?(p[n].p(l,o),q(p[n],1)):(p[n]=nt(l),p[n].c(),q(p[n],1),p[n].m(e,null))}for(O(),n=f.length;n<p.length;n+=1)h(n);P()}t[2]?g?g.p(t,o):(g=et(t),g.c(),g.m(n,null)):g&&(g.d(1),g=null)},i(t){if(!c){for(let t=0;t<f.length;t+=1)q(p[t]);c=!0}},o(t){p=p.filter(Boolean);for(let t=0;t<p.length;t+=1)B(p[t]);c=!1},d(t){t&&a(n),function(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}(p,t),g&&g.d()}}}function tt(t){let n,e;return n=new K({props:{paramNo:t[8],value:""}}),n.$on("change",t[5]),{c(){var t;(t=n.$$.fragment)&&t.c()},m(t,o){R(n,t,o),e=!0},p(t,e){const o={};8&e&&(o.paramNo=t[8]),n.$set(o)},i(t){e||(q(n.$$.fragment,t),e=!0)},o(t){B(n.$$.fragment,t),e=!1},d(t){F(n,t)}}}function nt(n){let e,o,l=n[0],c=tt(n);return{c(){c.c(),e=f("")},m(t,n){c.m(t,n),s(t,e,n),o=!0},p(n,o){1&o&&r(l,l=n[0])?(O(),B(c,1,1,t),P(),c=tt(n),c.c(),q(c),c.m(e.parentNode,e)):c.p(n,o)},i(t){o||(q(c),o=!0)},o(t){B(c),o=!1},d(t){t&&a(e),c.d(t)}}}function et(t){let n,e,o,l,r,c,p,h=t[2].opStr+"",$=t[2].result+"";return{c(){n=i("div"),e=i("h2"),e.textContent="Result",o=d(),l=i("p"),r=f(h),c=f(" = "),p=f($),m(e,"class","svelte-107y00z"),m(n,"id","result-pane"),m(n,"class","svelte-107y00z")},m(t,a){s(t,n,a),u(n,e),u(n,o),u(n,l),u(l,r),u(l,c),u(l,p)},p(t,n){4&n&&h!==(h=t[2].opStr+"")&&g(r,h),4&n&&$!==($=t[2].result+"")&&g(p,$)},d(t){t&&a(n)}}}function ot(t){let n,e,o,l,r,c,f,p,h;function g(t,n){return t[1]?X:W}let $=g(t),y=$(t),v=t[0]&&Z(t);return{c(){n=i("main"),e=i("h1"),e.textContent="Advanced Calculation",o=d(),l=i("div"),r=i("div"),c=i("h2"),c.textContent="Select Operation",f=d(),y.c(),p=d(),v&&v.c(),m(e,"class","svelte-107y00z"),m(c,"class","svelte-107y00z"),m(r,"id","operation-selector"),m(r,"class","svelte-107y00z"),m(l,"id","splitview"),m(l,"class","svelte-107y00z"),m(n,"class","svelte-107y00z")},m(t,a){s(t,n,a),u(n,e),u(n,o),u(n,l),u(l,r),u(r,c),u(r,f),y.m(r,null),u(l,p),v&&v.m(l,null),h=!0},p(t,[n]){$===($=g(t))&&y?y.p(t,n):(y.d(1),y=$(t),y&&(y.c(),y.m(r,null))),t[0]?v?(v.p(t,n),1&n&&q(v,1)):(v=Z(t),v.c(),q(v,1),v.m(l,null)):v&&(O(),B(v,1,1,(()=>{v=null})),P())},i(t){h||(q(v),h=!0)},o(t){B(v),h=!1},d(t){t&&a(n),y.d(),v&&v.d()}}}function lt(t,n,e){let o;var l;l=()=>{fetch("/api/ops").then((t=>t.json())).then((t=>{"ok"===t.status&&e(1,r=t.ops)}))},b().$$.on_mount.push(l);let r=null,c=null,u=[],s=null;const a=function(t,n){let e=null;return function(){const o=arguments;e&&clearTimeout(e),e=setTimeout((()=>{t.apply(null,o)}),n)}}((()=>{const t=new URL(`/api/calculate/${c.name}`,globalThis.location);u.forEach(((n,e)=>{t.searchParams.set(`param${e}`,n.toString())})),fetch(t.toString()).then((t=>t.json())).then((t=>{e(2,s={result:t.result,opStr:t.opStr})}))}),200);return t.$$.update=()=>{1&t.$$.dirty&&e(3,o=c?Array(c.args).fill(null).map(((t,n)=>n)):null)},[c,r,s,o,function(t){e(0,c=t),u=Array(c.args).fill(null),e(2,s=null),setTimeout((()=>{}),0)},function(t){console.log(`paramChanged: ${t}`);const{paramNo:n,value:o}=t.detail;u[n]=parseInt(o),u.some((t=>!t&&0!==t))?e(2,s=null):a()}]}return new class extends G{constructor(t){super(),D(this,t,lt,ot,r,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
